<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fare Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to right, #00c6ff, #0072ff);
            font-family: 'Segoe UI', sans-serif;
            color: #333;
        }
        .card {
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .form-section {
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #0072ff;
            margin-bottom: 0.8rem;
            border-bottom: 2px solid #0072ff;
            display: inline-block;
            padding-bottom: 0.3rem;
        }
        .btn-primary {
            background-color: #0072ff;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        .btn-primary:hover {
            background-color: #0057cc;
        }
        .btn-secondary {
            background-color: #6c757d;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        .btn-secondary:hover {
            background-color: #545b62;
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card p-4">
                    <h2 class="text-center mb-4">üöñ Fare Prediction System</h2>
                    <form method="POST" id="fareForm">
                        {% csrf_token %}

                        <!-- üìç Location Information -->
                        <div class="form-section">
                            <div class="section-title">üìç Location Information</div>
                            <div class="row g-3">
                                <div class="col-md-6"><input type="number" step="any" class="form-control" name="pickup_longitude" placeholder="Pickup Longitude" required></div>
                                <div class="col-md-6"><input type="number" step="any" class="form-control" name="pickup_latitude" placeholder="Pickup Latitude" required></div>
                                <div class="col-md-6"><input type="number" step="any" class="form-control" name="dropoff_longitude" placeholder="Dropoff Longitude" required></div>
                                <div class="col-md-6"><input type="number" step="any" class="form-control" name="dropoff_latitude" placeholder="Dropoff Latitude" required></div>
                            </div>
                        </div>

                        <!-- üöó Trip Details -->
                        <div class="form-section">
                            <div class="section-title">üöó Trip Details</div>
                            <div class="row g-3">
                                <div class="col-md-4"><input type="number" class="form-control" name="passenger_count" placeholder="Passenger Count" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="distance" placeholder="Distance (miles)" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="bearing" placeholder="Bearing (degrees)" required></div>
                            </div>
                        </div>

                        <!-- ‚è∞ Time Information -->
                        <div class="form-section">
                            <div class="section-title">‚è∞ Time Information</div>
                            <div class="row g-3">
                                <div class="col-md-3"><input type="number" class="form-control" name="hour" placeholder="Hour" required></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="day" placeholder="Day" required></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="month" placeholder="Month" required></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="weekday" placeholder="Weekday" required></div>
                                <div class="col-md-4"><input type="number" class="form-control" name="year" placeholder="Year" required></div>
                            </div>
                        </div>

                        <!-- ‚úàÔ∏è Airport Distances -->
                        <div class="form-section">
                            <div class="section-title">‚úàÔ∏è Airport Distances</div>
                            <div class="row g-3">
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="jfk_dist" placeholder="JFK Distance" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="ewr_dist" placeholder="EWR Distance" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="lga_dist" placeholder="LGA Distance" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="sol_dist" placeholder="SOL Distance" required></div>
                                <div class="col-md-4"><input type="number" step="any" class="form-control" name="nyc_dist" placeholder="NYC Distance" required></div>
                            </div>
                        </div>

                        <!-- üïê Time Indicators -->
                        <div class="form-section">
                            <div class="section-title">üïê Time Indicators</div>
                            <div class="row g-3">
                                <div class="col-md-6"><input type="number" class="form-control" name="is_weekend" placeholder="Is Weekend (0/1)" required></div>
                                <div class="col-md-6"><input type="number" class="form-control" name="rush_hours" placeholder="Rush Hours (0/1)" required></div>
                            </div>
                        </div>

                        <!-- üîß Car Condition -->
                        <div class="form-section">
                            <div class="section-title">üîß Car Condition</div>
                            <div class="row g-3">
                                <div class="col-md-4"><input type="number" class="form-control" name="car_condition_Excellent" placeholder="Excellent (0/1)"></div>
                                <div class="col-md-4"><input type="number" class="form-control" name="car_condition_Good" placeholder="Good (0/1)"></div>
                                <div class="col-md-4"><input type="number" class="form-control" name="car_condition_Very Good" placeholder="Very Good (0/1)"></div>
                            </div>
                        </div>

                        <!-- üå§Ô∏è Weather Conditions -->
                        <div class="form-section">
                            <div class="section-title">üå§Ô∏è Weather Conditions</div>
                            <div class="row g-3">
                                <div class="col-md-3"><input type="number" class="form-control" name="weather_rainy" placeholder="Rainy (0/1)"></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="weather_stormy" placeholder="Stormy (0/1)"></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="weather_sunny" placeholder="Sunny (0/1)"></div>
                                <div class="col-md-3"><input type="number" class="form-control" name="weather_windy" placeholder="Windy (0/1)"></div>
                            </div>
                        </div>

                        <!-- üö¶ Traffic Conditions -->
                        <div class="form-section">
                            <div class="section-title">üö¶ Traffic Conditions</div>
                            <div class="row g-3">
                                <div class="col-md-6"><input type="number" class="form-control" name="traffic_condition_Dense Traffic" placeholder="Dense Traffic (0/1)"></div>
                                <div class="col-md-6"><input type="number" class="form-control" name="traffic_condition_Flow Traffic" placeholder="Flow Traffic (0/1)"></div>
                            </div>
                        </div>

                        <!-- Buttons -->
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-secondary me-2" onclick="randomizeForm()">üé≤ Randomize Data</button>
                            <button type="submit" class="btn btn-primary">üöÄ Predict Fare</button>
                        </div>
                    </form>

                    {% if result %}
                        <div class="alert alert-success mt-4 text-center">
                            <strong>Predicted Fare:</strong> ${{ result }}
                        </div>
                    {% endif %}

                    {% if error %}
                        <div class="alert alert-danger mt-4 text-center">
                            <strong>Error:</strong> {{ error }}
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <script>
        function randomizeForm() {
            const form = document.getElementById("fareForm");
            const random = (min, max) => (Math.random() * (max - min) + min).toFixed(2);
            const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);

            form.pickup_longitude.value = random(-74.05, -73.75);
            form.pickup_latitude.value = random(40.63, 40.85);
            form.dropoff_longitude.value = random(-74.05, -73.75);
            form.dropoff_latitude.value = random(40.63, 40.85);
            form.passenger_count.value = randomInt(1, 6);
            form.distance.value = random(0.5, 30);
            form.bearing.value = random(0, 360);
            form.hour.value = randomInt(0, 23);
            form.day.value = randomInt(1, 31);
            form.month.value = randomInt(1, 12);
            form.weekday.value = randomInt(0, 6);
            form.year.value = randomInt(2015, 2025);
            form.jfk_dist.value = random(0, 25);
            form.ewr_dist.value = random(0, 25);
            form.lga_dist.value = random(0, 25);
            form.sol_dist.value = random(0, 10);
            form.nyc_dist.value = random(0, 10);
            form.is_weekend.value = randomInt(0, 1);
            form.rush_hours.value = randomInt(0, 1);
            form["car_condition_Excellent"].value = randomInt(0, 1);
            form["car_condition_Good"].value = randomInt(0, 1);
            form["car_condition_Very Good"].value = randomInt(0, 1);
            form.weather_rainy.value = randomInt(0, 1);
            form.weather_stormy.value = randomInt(0, 1);
            form.weather_sunny.value = randomInt(0, 1);
            form.weather_windy.value = randomInt(0, 1);
            form["traffic_condition_Dense Traffic"].value = randomInt(0, 1);
            form["traffic_condition_Flow Traffic"].value = randomInt(0, 1);
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
